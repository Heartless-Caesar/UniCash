{"ast":null,"code":"import _readOnlyError from \"@babel/runtime/helpers/readOnlyError\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { toast } from \"react-hot-toast\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar Context = createContext();\nexport var StateContext = function StateContext(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showCart = _useState2[0],\n      setShowCart = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cartItems = _useState4[0],\n      setCartItems = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalPrice = _useState6[0],\n      setTotalPrice = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      totalQuantity = _useState8[0],\n      setTotalQuantity = _useState8[1];\n\n  var _useState9 = useState(1),\n      _useState10 = _slicedToArray(_useState9, 2),\n      quantity = _useState10[0],\n      setQuantity = _useState10[1];\n\n  var foundItem;\n\n  var onAdd = function onAdd(product, quantity) {\n    var checkProductInCart = cartItems.find(function (item) {\n      return item._id === product._id;\n    });\n    setTotalPrice(function (prevTotalPrice) {\n      return prevTotalPrice + product.price * quantity;\n    });\n    setTotalQuantity(function (prevTotalQuantity) {\n      return prevTotalQuantity + quantity;\n    });\n\n    if (checkProductInCart) {\n      var updatedCartItems = cartItems.map(function (cartProduct) {\n        if (cartProduct._id === product._id) {\n          return _objectSpread(_objectSpread({}, cartProduct), {}, {\n            quantity: cartProduct.quantity + quantity\n          });\n        }\n      });\n      setCartItems(updatedCartItems);\n      toast.success(quantity + \" \" + product.name + \" added to the cart\");\n    } else {\n      product.quantity = quantity;\n      setCartItems([].concat(_toConsumableArray(cartItems), [_objectSpread({}, product)]));\n    }\n  };\n\n  var onRemove = function onRemove(product) {\n    foundItem = cartItems.find(function (item) {\n      return item._id === product._id;\n    });\n    var updatedCartItems = cartItems.filter(function (item) {\n      return item._id !== foundItem._id;\n    });\n    setTotalPrice(function (prevTotalPrice) {\n      return prevTotalPrice - foundItem.price * foundItem.quantity;\n    });\n    setTotalQuantity(function (prevTotalQuantity) {\n      return prevTotalQuantity - foundItem.quantity;\n    });\n    setCartItems(updatedCartItems);\n  };\n\n  var toggleCartItemQuantity = function toggleCartItemQuantity(id, value) {\n    foundItem = cartItems.find(function (item) {\n      return item._id === id;\n    });\n    index = cartItems.findIndex(function (product) {\n      return product._id === id;\n    });\n    var updatedCartItems = cartItems.filter(function (item) {\n      return item._id !== id;\n    });\n\n    if (value === \"inc\") {\n      cartItems.map(function (item) {\n        return item._id === id ? _objectSpread(_objectSpread({}, item), {}, {\n          quantity: item.quantity + 1\n        }) : item;\n      }), _readOnlyError(\"updatedCartItems\");\n      setCartItems(_toConsumableArray(updatedCartItems));\n      setTotalPrice(function (prevTotalPrice) {\n        return prevTotalPrice + foundItem.price;\n      });\n      setTotalQuantity(function (prevTotalQuantity) {\n        return prevTotalQuantity + 1;\n      });\n    } else if (value === \"dec\") {\n      if (foundItem.quantity > 1) {\n        cartItems.map(function (item) {\n          return item._id === id ? _objectSpread(_objectSpread({}, item), {}, {\n            quantity: item.quantity - 1\n          }) : item;\n        }), _readOnlyError(\"updatedCartItems\");\n        setCartItems(_toConsumableArray(updatedCartItems));\n        setTotalPrice(function (prevTotalPrice) {\n          return prevTotalPrice - foundItem.price;\n        });\n        setTotalQuantity(function (prevTotalQuantity) {\n          return prevTotalQuantity - 1;\n        });\n      }\n    }\n  };\n\n  var increaseQty = function increaseQty() {\n    setQuantity(function (prevQty) {\n      return prevQty + 1;\n    });\n  };\n\n  var decreaseQty = function decreaseQty() {\n    setQuantity(function (prevQty) {\n      if (prevQty - 1 < 1) {\n        return 1;\n      }\n\n      return prevQty - 1;\n    });\n  };\n\n  return _jsx(Context.Provider, {\n    value: {\n      showCart: showCart,\n      cartItems: cartItems,\n      totalPrice: totalPrice,\n      totalQuantity: totalQuantity,\n      quantity: quantity,\n      setShowCart: setShowCart,\n      setCartItems: setCartItems,\n      setTotalPrice: setTotalPrice,\n      setTotalQuantity: setTotalQuantity,\n      increaseQty: increaseQty,\n      decreaseQty: decreaseQty,\n      onAdd: onAdd,\n      onRemove: onRemove,\n      toggleCartItemQuantity: toggleCartItemQuantity\n    },\n    children: children\n  });\n};\nexport var useStateContext = function useStateContext() {\n  return useContext(Context);\n};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","toast","Context","StateContext","children","showCart","setShowCart","cartItems","setCartItems","totalPrice","setTotalPrice","totalQuantity","setTotalQuantity","quantity","setQuantity","foundItem","onAdd","product","checkProductInCart","find","item","_id","prevTotalPrice","price","prevTotalQuantity","updatedCartItems","map","cartProduct","success","name","onRemove","filter","toggleCartItemQuantity","id","value","index","findIndex","increaseQty","prevQty","decreaseQty","useStateContext"],"sources":["/home/cesa/Github/UniCash/App/Context/Cart_context.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { toast } from \"react-hot-toast\";\n\n//BASE CONTEXT\nconst Context = createContext();\n\nexport const StateContext = ({ children }) => {\n  const [showCart, setShowCart] = useState(false);\n  const [cartItems, setCartItems] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [totalQuantity, setTotalQuantity] = useState(0);\n  const [quantity, setQuantity] = useState(1);\n  let foundItem;\n\n  //ADD PRODUCT TO CART\n  const onAdd = (product, quantity) => {\n    const checkProductInCart = cartItems.find(\n      (item) => item._id === product._id\n    );\n    setTotalPrice(\n      (prevTotalPrice) => prevTotalPrice + product.price * quantity\n    );\n    setTotalQuantity((prevTotalQuantity) => prevTotalQuantity + quantity);\n\n    if (checkProductInCart) {\n      const updatedCartItems = cartItems.map((cartProduct) => {\n        if (cartProduct._id === product._id) {\n          return { ...cartProduct, quantity: cartProduct.quantity + quantity };\n        }\n      });\n      setCartItems(updatedCartItems);\n      toast.success(`${quantity} ${product.name} added to the cart`);\n    } else {\n      product.quantity = quantity;\n      setCartItems([...cartItems, { ...product }]);\n    }\n  };\n  //REMOVE ITEM FROM CART\n  const onRemove = (product) => {\n    foundItem = cartItems.find((item) => item._id === product._id);\n    const updatedCartItems = cartItems.filter(\n      (item) => item._id !== foundItem._id\n    );\n\n    setTotalPrice(\n      (prevTotalPrice) => prevTotalPrice - foundItem.price * foundItem.quantity\n    );\n    setTotalQuantity(\n      (prevTotalQuantity) => prevTotalQuantity - foundItem.quantity\n    );\n    setCartItems(updatedCartItems);\n  };\n  //CHANGE PRODUCT QUANTITY IN THE CART OFFSET\n  const toggleCartItemQuantity = (id, value) => {\n    foundItem = cartItems.find((item) => item._id === id);\n    index = cartItems.findIndex((product) => product._id === id);\n    const updatedCartItems = cartItems.filter((item) => item._id !== id);\n\n    if (value === \"inc\") {\n      //Finds the desired item without removing it and udpated the quantity\n      updatedCartItems = cartItems.map((item) =>\n        item._id === id\n          ? {\n              ...item,\n              quantity: item.quantity + 1,\n            }\n          : item\n      );\n      //Updated cart state\n      setCartItems([...updatedCartItems]);\n\n      //Updated cart total price\n      setTotalPrice((prevTotalPrice) => prevTotalPrice + foundItem.price);\n\n      //Updated cart total quantity\n      setTotalQuantity((prevTotalQuantity) => prevTotalQuantity + 1);\n    } else if (value === \"dec\") {\n      if (foundItem.quantity > 1) {\n        updatedCartItems = cartItems.map((item) =>\n          item._id === id\n            ? {\n                ...item,\n                quantity: item.quantity - 1,\n              }\n            : item\n        );\n        setCartItems([...updatedCartItems]);\n        setTotalPrice((prevTotalPrice) => prevTotalPrice - foundItem.price);\n        setTotalQuantity((prevTotalQuantity) => prevTotalQuantity - 1);\n      }\n    }\n  };\n\n  //INCREASE ITEM QUANTITY FOR PURCHASE\n  const increaseQty = () => {\n    setQuantity((prevQty) => prevQty + 1);\n  };\n\n  //DECREASE ITEM QUANTITY FOR PURCHASE\n  const decreaseQty = () => {\n    setQuantity((prevQty) => {\n      if (prevQty - 1 < 1) {\n        return 1;\n      }\n      return prevQty - 1;\n    });\n  };\n\n  return (\n    <Context.Provider\n      value={{\n        showCart,\n        cartItems,\n        totalPrice,\n        totalQuantity,\n        quantity,\n        setShowCart,\n        setCartItems,\n        setTotalPrice,\n        setTotalQuantity,\n        increaseQty,\n        decreaseQty,\n        onAdd,\n        onRemove,\n        toggleCartItemQuantity,\n      }}\n    >\n      {children}\n    </Context.Provider>\n  );\n};\n\n//FUNCTION USED TO CALL THE CONTEXT\n//DESTRUCTURE THE CONTEXT ELEMENTS YOU DESIRE TO USE FROM IT\nexport const useStateContext = () => useContext(Context);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}